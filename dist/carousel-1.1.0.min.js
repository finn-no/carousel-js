/*! carousel - v1.1.0 - 2013-11-16. Copyright (c) 2013 FINN.no AS - http://finn.no/; Licensed MIT */
var FINN=FINN||{};!function(a){"use strict";"function"!=typeof Object.create&&(Object.create=function(a){function b(){}return b.prototype=a,new b}),a.create=function(a){return Object.create(a)},a.compose=function(){if(0===arguments.length||!arguments[0])throw new TypeError("compose expects at least one object argument");var a,b,c,d=FINN.create(arguments[0]);for(a=1,b=arguments.length;b>a;++a){if(!arguments[a])throw new TypeError("Tried to compose null or undefined");for(c in arguments[a])d[c]=arguments[a][c]}return d}}(FINN),function(a,b){"use strict";a.fragment=function(){for(var a=document.createDocumentFragment(),c=b.isArray(arguments[0])?arguments[0]:arguments,d=0,e=c.length;e>d;++d)c[d]&&a.appendChild(c[d]);return a};var c=11,d=a.elementBuilder=function(a){return function(b){var e=1,f=b;return(!b||b.tagName||b.nodeType===c||"string"==typeof b)&&(e=0,f={}),d.addContent(d.attr(document.createElement(a),f),[].slice.call(arguments,e))}};a.elementBuilder.build=function(b){return a.elementBuilder(b).apply(null,[].slice.call(arguments,1))},d.attr=function(a,b){var c,e;for(c in b)b.hasOwnProperty(c)&&(e=d.attrHandlers[c],e?e(a,b[c]):a[c]=b[c]);return a},d.addContent=function(a,b){for(var c=0,d=b.length;d>c;++c)"string"==typeof b[c]?a.appendChild(document.createTextNode(b[c])):a.appendChild(b[c]);return a},d.attrHandlers={events:function(a,c){var d=b(a);for(var e in c)c.hasOwnProperty(e)&&d.bind(e,c[e])},style:function(a,c){b(a).css(c)}};var e=d("div");d.mod=function(a){return e({className:"mod mod_"+a},d.addContent(e({className:"bd"}),[].slice.call(arguments,1)))}}(FINN,jQuery),FINN.carousel=FINN.carousel||{},function(a,b){"use strict";var c=FINN.elementBuilder("div");a.animatedProjector={create:function(b,c,d){var e=FINN.compose(this,{data:c,options:d||{},animator:d.animator||a.horizontalSlider,currentId:0,queue:[]});return b.on("show",function(){return e.show.apply(e,arguments)}),e},buildCarousel:function(a){var b=this.carousel=c({className:"carousel"}),d=this;return this.data.get(0,function(e){d.mainFrame=c({className:"frame"}),d.mainFrame.appendChild(e),d.viewport=c({className:"viewport"},d.mainFrame),d.viewport.style.position="relative",d.viewport.style.overflow="hidden",b.appendChild(d.viewport),"function"==typeof a&&a(b)}),b},show:function(a){if(this.isAnimating()||a!==this.currentId){var b=this,c=function(){return b.animationComplete.apply(b,[a].concat([].slice.call(arguments)))};return this.currTarget=a,a===this.currentId?this.animationFrame().revertAnimation(c):(this.data.get(a,function(d){b.addElementToFrame(d,a),b.animationFrame().animate(c)}),void 0)}},isAnimating:function(){return"number"==typeof this.currTarget},animationComplete:function(a,b){this.currentId=a,delete this.currTarget,this.display(b.innerHTML),this.finishAnimation()},animationFrame:function(){if(!this._animFrame){var a=this.mainFrame.firstChild.cloneNode(!0);a.style.width=b(this.mainFrame).css("width"),this._animFrame=this.animator.create(a,this.options),this.viewport.appendChild(this._animFrame.element),this.mainFrame.firstChild.innerHTML=""}return this._animFrame},finishAnimation:function(){this._animFrame&&(this._animFrame.detach(),delete this._animFrame),delete this.animation},isAnimatingBackwards:function(a){var b=this.data.size()-1,c=0===this.currentId&&a===b||this.currentId===b&&0===a;return c&&b>1?a>0:a<this.currentId?!0:a>this.currentId?!1:a<this.currTarget},addElementToFrame:function(a,b){this.isAnimatingBackwards(b)?this.animationFrame().prepend(a):this.animationFrame().append(a)},display:function(a){this.mainFrame.firstChild.innerHTML=a}}}(FINN.carousel,jQuery),FINN.carousel=FINN.carousel||{},function(a){"use strict";a.animator={append:function(){throw new Error("Implement the append method to add element to the animation")},prepend:function(a){this.append(a)},detach:function(){this.element.parentNode.removeChild(this.element)},animate:function(){throw new Error("Implement the animate method to start the animation")},revertAnimation:function(){throw new Error("Implement the animate method to revert the animation curretn")},stopAnimation:function(){this.animation&&this.animation.stop()}}}(FINN.carousel,jQuery),FINN.carousel=FINN.carousel||{},function(a,b){"use strict";b.setupClickNavigation=function(b,c,d,e){var f=a(d).find(".next"),g=a(d).find(".prev"),h=e||"opacity25";f.bind("click",function(a){a.preventDefault(),b.next()}),g.bind("click",function(a){a.preventDefault(),b.prev()});var i=function(a){g.toggleClass(h,0===a),f.toggleClass(h,c.isBounded&&a>=c.size()-1)};b.on("show",i),i(b.currentId)}}(jQuery,FINN.carousel),FINN.carousel=FINN.carousel||{},function(a,b){"use strict";function c(a){var c=b(a.target).data("gallery-url");c&&(document.location=c)}a.setupClickToGallery=function(a){b(a).on("click",c)}}(FINN.carousel,jQuery),function(a,b){"use strict";a.setupClickableElementNavigation=function(a,c,d,e,f){var g=e||"selectedElement",h=function(a){return b(a).index()};f&&(h=f),b(c).delegate(d,"click",function(){a.show(h(this))}),b(c).find(d).css("cursor","pointer"),a.on("show",function(a){b(c).children().removeClass(g).eq(a).addClass(g)})}}(FINN.carousel,jQuery),FINN.carousel=FINN.carousel||{},function(a){"use strict";a.controller=bane.createEventEmitter({create:function(a){return FINN.compose(this,{seq:a,currentId:0})},start:function(a){this.currentId=-1,this.show(+a||0)},show:function(a){0>a||!this.seq.contains(a)||this.currentId===a||(this.currentId=a,this.emit("show",a))},peek:function(){return this.currentId},setCurrentId:function(a){this.currentId=a},next:function(){this.show(this.currentId+1)},prev:function(){var a="number"==typeof this.currentId?this.currentId-1:0;this.show(a)}})}(FINN.carousel),function(a){"use strict";a.setupDottedIndexDisplayer=function(a){function b(){for(var a="",b=0;b<d.size();b++){var f=e.currentId===b?" active":"";a+='<span class="dot'+f+'"></span>'}c.innerHTML=a}if(!a)throw new TypeError("Params must be given");var c=a.root,d=a.list,e=a.controller;b(),e.on("show",b)}}(FINN.carousel),FINN.carousel=FINN.carousel||{},function(a,b){"use strict";function c(a,c){return c>=0?b(a).children().get(c):!1}a.elementList={isBounded:!0,create:function(a){return FINN.compose(this,{element:a})},size:function(){return b(this.element).children().length},contains:function(a){return!!c(this.element,a)},get:function(a,d){var e=c(this.element,a);d(b(e).clone().get(0))}}}(FINN.carousel,jQuery),FINN.carousel=FINN.carousel||{},function(a){"use strict";a.emptyList={isBounded:!1,create:function(a){a=a||{};var b=FINN.compose(this,a);return a.get&&(b.get=function(b,c){var d=a.get.call(this,b,c);"undefined"!=typeof d&&c(d)}),b},size:function(){return 0},contains:function(){return!1},get:function(){}}}(FINN.carousel),FINN.carousel=FINN.carousel||{},function(a,b){"use strict";var c=FINN.elementBuilder("div");a.fader=FINN.compose(a.animator,{create:function(a,d){return FINN.compose(this,{animOpt:b.extend({duration:150},d),element:c({className:"frame",style:{position:"relative",display:"none"}},a)})},append:function(a){b(a).css({position:"absolute",left:0,top:0,display:"none"});for(var c=this.element.firstChild.nextSibling;c;)c.parentNode.removeChild(c),c=c.nextSibling;this.element.appendChild(a)},animate:function(a){this.stopAnimation(),b(this.element).css("display","block");var c=this.animOpt.duration;this.animation=b(this.element.lastChild).fadeIn(c,function(){a(this.element.lastChild)}.bind(this))},revertAnimation:function(a){this.stopAnimation();var c=this.animOpt.duration;this.animation=b(this.element.lastChild).fadeOut(c,function(){a(this.element.firstChild)}.bind(this))}})}(FINN.carousel,jQuery),FINN.carousel=FINN.carousel||{},function(a,b){"use strict";function c(){var a=document.documentElement;a.requestFullscreen?a.requestFullscreen():a.mozRequestFullScreen?a.mozRequestFullScreen():a.webkitRequestFullScreen&&a.webkitRequestFullScreen()}a.hasFullscreenSupport=function(){var a=document.documentElement;return a.requestFullscreen?!0:a.mozRequestFullScreen?!0:a.webkitRequestFullScreen?!0:!1},a.setupFullscreenSupport=function(a){var d=document.getElementById(a);d&&d.addEventListener("click",function(){b("#"+a).hide(),c()},!1),document.addEventListener("fullscreenchange",function(){document.fullscreen||b("#"+a).show()},!1),document.addEventListener("mozfullscreenchange",function(){document.mozFullScreen||b("#"+a).show()},!1),document.addEventListener("webkitfullscreenchange",function(){document.webkitIsFullScreen||b("#"+a).show()},!1)},a.setupKeyboardShortcut=function(){b(document).bind("keyup",function(a){a&&(console.log(a.which),70===a.which&&c())})}}(FINN.carousel,jQuery),FINN.carousel=FINN.carousel||{},function(a,b){"use strict";function c(a,b,c){return b!==c?1:a+1}function d(a,c){return b(this.element).css("left",a.from+"px"),this.startPos=a.from,h()?f.call(this,a,c):e.call(this,a,c)}function e(a,c){var d=b.extend({},this.animOpt,{complete:this.animationCallback(c)}),e={left:a.to+"px"};return this.animation=b(this.element).animate(e,d),this.animation}function f(a,c){var d=this.animOpt.duration/1e3+"s";return b(this.element).css("left"),b(this.element).one(i.endEvent,this.animationCallback(c)).css(i.cssStyle,"left "+d).css("left",a.to+"px"),this.animation=b(this.element),this.animation}function g(){for(var a in m)if(m.hasOwnProperty(a)&&document.body&&"undefined"!=typeof document.body.style[a]){i=m[a];break}}function h(){return"undefined"!=typeof i}var i,j=FINN.elementBuilder("div"),k=-1,l=1,m={WebkitTransition:{endEvent:"webkitTransitionEnd",cssStyle:"-webkit-transition"},MozTransition:{endEvent:"transitionend",cssStyle:"-moz-transition"},OTransition:{endEvent:"oTransitionEnd",cssStyle:"-o-transition"},msTransition:{endEvent:"MSTransitionEnd",cssStyle:"-ms-transition"},transition:{endEvent:"transitionend",cssStyle:"transition"}};a.horizontalSlider=FINN.compose(a.animator,{create:function(a,c){var d=FINN.compose(this,{width:b(a).width(),direction:k,animOpt:c,element:j({className:"frame"})});return b(d.element).css({position:"relative",top:0}),d.append(a),d.skipSteps=0,g(),d},destination:function(a){var b=this.width*this.skipSteps,c={from:0,to:-b,backwards:!1};return this.headedLeft()&&(c={from:-b,to:0}),this.animation&&(c.from=parseInt(this.animation.css("left"),10)),"number"==typeof a&&(c.to=a),c.from<c.to&&(c.backwards=!0),c},registerElement:function(a){a.style.width=this.width+"px",a.style.cssFloat="left";var c=b(this.element).width()+this.width;this.element.style.width=c+"px",this.previousContent=this.contentElement,this.contentElement=a},append:function(a){this.element.appendChild(a),this.registerElement(a),this.skipSteps=c(this.skipSteps,this.direction,l),this.direction=l},prepend:function(a){this.element.insertBefore(a,this.element.firstChild),this.registerElement(a);var d=parseInt(b(this.element).css("left")||0,10);b(this.element).css("left",d-this.width),this.skipSteps=c(this.skipSteps,this.direction,k),this.direction=k},animate:function(a){return this.stopAnimation(),d.call(this,this.destination(),a)},animationCallback:function(a){var b=this;return function(){a(b.contentElement),delete b.startPos}},revertAnimation:function(a){return this.stopAnimation(),this.contentElement=this.previousContent,d.call(this,this.destination(this.startPos),a)},headedLeft:function(){return this.direction===k}})}(FINN.carousel,jQuery),function(a){"use strict";a.setupIndexDisplayer=function(a){function b(){c.innerHTML=e.isBounded?f.replace("{0}",g.currentId+1).replace("{1}",e.size()):d+" "+(g.currentId+1)}if(!a)throw new TypeError("Params must be given");var c=a.root,d=a.type,e=a.list,f=a.label;f||(f=d+" {0} av {1}");var g=a.controller;b(),g.on("show",b)}}(FINN.carousel),function(a,b){"use strict";a.setupKeyboardNavigation=function(a){b(document).bind("keyup",function(c){if(!b(c.target).is(":input"))switch(c.which){case 37:a.prev();break;case 39:a.next()}})}}(FINN.carousel,jQuery),function(a,b){"use strict";function c(a,c){return b(a).children().get(c)}function d(a,d){if(this.contains(a)){var g=c(this.element,a),h=b(g).find("img, iframe, script").get(0),i=h.getAttribute("data-src");i?(e(h,g,d),f.call(this,h),h.src=i,h.setAttribute("data-src","")):void 0!==d&&d(b(g).clone().get(0))}}function e(a,c,d){void 0!==d&&b(a).one("load",function(){d(b(c).clone().get(0))})}function f(a){if(void 0!==this.errorCallback){var c=this.errorCallback;b(a).one("error",function(){var a=c(this.getAttribute("src"));void 0!==a&&(this.src=a)})}}a.lazyImageList=a.lazySrcElementList=FINN.compose(a.elementList,{create:function(a,b){return FINN.compose(this,{element:a,errorCallback:b})},get:function(a,b){d.call(this,a,b),d.call(this,a+1)}})}(FINN.carousel,jQuery),FINN.carousel=FINN.carousel||{},function(a){"use strict";a.loopingController=FINN.compose(a.controller,{show:function(a){0>a?a=this.seq.size()-1:0!==a&&this.seq.contains(a)&&this.currentId!==a||(a=0),this.currentId=a,this.emit("show",a)},prev:function(){var a="number"==typeof this.currentId?this.currentId-1:-1;this.show(a)}})}(FINN.carousel),function(a){"use strict";a.overlayProjector={create:function(a,b,c){return FINN.compose(this,{controller:a,data:b,view:c})},buildCarousel:function(){var a=this;return this.controller.on("show",function(){return a.show.apply(a,arguments)}),this.show(0),this.view},show:function(a){var b=this;this.data.get(a,function(a){b.view.innerHTML="",b.view.appendChild(a)})}}}(FINN.carousel),FINN.carousel=FINN.carousel||{},function(a,b){"use strict";function c(){return"-webkit-transform"in document.body.style}function d(a,c,d){for(var e=b(c).find(d),f=Math.ceil(e.length-6)/2,g=e[a],i=e.length,j=0,k=0;i>k;k++)k<=Math.ceil(f+1)||(b(g).before(b(e[k]).clone()),b(e[k]).remove(),j=++j);return console.log("newViewIndex",j),h=j+1,j}function e(a,c,d,e){var f=b(d).find(e),i=b(f[0]),j=f.length-1,k=f[j];b(d).find(".thumbwrap").removeClass("selectedThumb"),g(a,c)||0===c&&a===j?b(d).append(i):b(k).insertBefore(i),b(b(d).find(".thumbwrap")[h]).addClass("selectedThumb")}function f(a,d,e,f,g,h){f+=1;var i=b(d).find(e),j=b(i[f]),k=j.position(),l=b(d.parentNode.parentNode).parent().width(),m=j.outerWidth(!0),n=70,o=l/2-(m-j.width()),p=0;null!=k&&(p=k.left+n);var q={left:-1*p+o};b(d).find(".thumbwrap").removeClass("selected"),g===i.length-1&&0===f||0===g&&f===i.length-1?c()&&b("#thumbnails").css({"-webkit-transition":"all 0.0s ease-in-out","-webkit-transform":"translate3d("+q.left+"px,0,0)"}):c()?b("#thumbnails").css({"-webkit-transition":"all 0.4s","-webkit-transform":"translate3d("+q.left+"px,0,0)"}):b("#thumbnails").animate(q,376,"swing",function(){j.addClass("selected"),console.log("Added selected")}),h&&h.apply(null,this)}function g(a,b){return b>a}var h=0;a.setupScrollingThumbnailStrip=function(a,b,c){var g=!1,h=0,i=d(0,b,c,a);f(a,b,c,i,h),a.on("show",function(a){console.log("pushAndPop",h,a),e(h,a,b,c),h=a,g=!0})}}(FINN.carousel,jQuery),FINN.carousel=FINN.carousel||{},function(a){"use strict";a.setupSlideshow=function(a,b){var c;a.on("show",function(){clearTimeout(c),c=setTimeout(a.next,b)})}}(FINN.carousel),function(a,b){"use strict";a.setupSplitProjectorNavigation=function(a,c){b(c).on("click",function(c){var d=b(this).offset().left,e=c.pageX,f=e-d,g=b(this).width()/2;g>=f?a.prev():a.next()})}}(FINN.carousel,jQuery),function(a,b){"use strict";a.setupThumbnailNavigation=function(c,d,e){a.setupClickableElementNavigation(c,d,"img","selectedThumb",e),a.setupClickNavigation(c,d,b(".thumbnails"))}}(FINN.carousel,jQuery),function(a){"use strict";function b(a){return{x:a.targetTouches[0].pageX,y:a.targetTouches[0].pageY}}a.setupTouchNavigation=function(a,c){var d;c.addEventListener("touchstart",function(a){a.touches.length>1||(d=b(a))},!1),c.addEventListener("touchmove",function(c){if(!d||c.touches.length>1)return d=null,void 0;var e=b(c),f=d.x-e.x,g=d.y-e.y;Math.abs(g)>Math.abs(f)||(c.preventDefault(),f>=30&&a.next(),-30>=f&&a.prev())},!1)}}(FINN.carousel);